digraph HMM {
  rankdir=LR
  Begin [shape=square, color=blue, pos="0,0!"]
  m1 [shape=square, label=M, pos="2,0!"]
  m2 [shape=square, label=M, pos="4,0!"]
  m3 [shape=square, label=M, pos="6,0!"]
  End [shape=square, color=blue, pos="8,0!"]
  i0 [shape=diamond, label=I, pos="0,1!"]
  i1 [shape=diamond, label=I, pos="2,1!"]
  i2 [shape=diamond, label=I, pos="4,1!"]
  i3 [shape=diamond, label=I, pos="6,1!"]
  d1 [shape=circle, label=D, pos="2,2!"]
  d2 [shape=circle, label=D, pos="4,2!"]
  d3 [shape=circle, label=D, pos="6,2!"]
  
  Begin -> i0 [label="1/8"]
  Begin -> m1 [label="5/8"]
  Begin -> d1 [label="2/8"]
  i0 -> {i0 m1 d1} [label="1/3"]
  m1 -> i1 [label="1/7"]
  m1 -> m2 [label="2/7"]
  m1 -> d2 [label="4/7"]
  i1 -> {i1 m2 d2} [label="1/3"]
  d1 -> i1 [label="1/4"]
  d1 -> m2 [label="2/4"]
  d1 -> d2 [label="1/4"]
  m2 -> i2 [label="3/7"]
  m2 -> m3 [label="3/7"]
  m2 -> d3 [label="1/7"]
  i2 -> i2 [label="4/9"]
  i2 -> m3 [label="4/9"]
  i2 -> d3 [label="1/9"]
  d2 -> i2 [label="2/4"]
  d2 -> m3 [label="1/4"]
  d2 -> d3 [label="1/4"]
  m3 -> i3 [label="1/7"]
  m3 -> End [label="6/7"]
  i3 -> {i3 End} [label="1/2"]
  d3 -> {i3 End} [label="1/2"]
  
}
